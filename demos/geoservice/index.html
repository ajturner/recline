---
layout: container
title: Demos - GeoServices
recline-deps: true
root: ../../
---

<style type="text/css">
.recline-slickgrid {
  height: 550px;
}

.recline-timeline .vmm-timeline {
  height: 550px;
}
.service-url input { width: 600px; }
</style>

<form action="" method="GET" class="form-inline" id="service-url-form">
  <div class="input-prepend service-url">
    <input type="text" name="url" value="" class="span2" placeholder="Feature Service URL ...">
  </div>       
  <button type="submit" class="btn">Load Â»</button>     
</form>

<div class="service-url-here"></div>

<div class="data-explorer-here"></div>

<div style="clear: both;"></div>

<script type="text/javascript" src="../../src/backend.geoservice.js"></script>

<script type="text/javascript" charset="utf-8">

jQuery(function($) {
  var defaultUrl = 'http://services.arcgis.com/hRUr1F8lE8Jq2uJo/arcgis/rest/services/Washington_DC_Building_Permits_2012/FeatureServer';

  // Create an Explorer
  window.dataExplorer = null;
  window.explorerDiv = $('.data-explorer-here');
  
  $('#service-url-form').submit(function() {
    var url = $('.service-url input').val()
    loadService(url);
    return false;
  });    
  $('.service-url input').val(defaultUrl);
  loadService(defaultUrl);
});

var loadService = function(url) {
  var dataset = new recline.Model.Dataset({
    url: url,
    backend: 'geoservice'
  });
  createExplorer(dataset, null);
  
}
// make Explorer creation / initialization in a function so we can call it
// again and again
var createExplorer = function(dataset, state) {
  // remove existing data explorer view
  var reload = false;
  if (window.dataExplorer) {
    window.dataExplorer.remove();
    reload = true;
  }
  window.dataExplorer = null;
  var $el = $('<div />');
  $el.appendTo(window.explorerDiv);

  var views = [
    {
      id: 'grid',
      label: 'Grid',
      view: new recline.View.SlickGrid({
        model: dataset
      })
    },
    {
      id: 'graph',
      label: 'Graph',
      view: new recline.View.Graph({
        model: dataset
      })
    },
    {
      id: 'map',
      label: 'Map',
      view: new recline.View.Map({
        model: dataset
      })
    },
    {
      id: 'transform',
      label: 'Transform',
      view: new recline.View.Transform({
        model: dataset
      })
    }
  ];

  window.dataExplorer = new recline.View.MultiView({
    model: dataset,
    el: $el,
    state: state,
    views: views
  });
}

</script>
